<!DOCTYPE html>
<html lang="tr">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
  <meta name="theme-color" content="#000000" />  

  <title>CORS_&_CSP_TESTING</title>
</head>

<body>

  <noscript>Bu uygulamayı çalıştırmak için JavaScript'i etkinleştirmeniz gerekir.</noscript>
  
  <p style="text-align:center,font-size:24px">
    <b>CORS & CSP TESTING</b>
  </p>
  
  <iframe 
          id="iframe" 
          src="https://banking.bo.test.platform.integrated.finance" 
          width="100%" 
          height="500" 
          allowfullscreen 
          sandbox="allow-same-origin allow-scripts allow-popups allow-forms"> 
  </iframe> 
  
  
  <label for="url">URL:</label>
  <input type="text" id="url" name="url" required size="100">
  label for="method">METHOD:</label>
  <input type="text" id="method" name="method" required>
  label for="request">REQUEST:</label>
  <input type="text" id="request" name="request" required>
  
  <button onclick="test()">TEST</button>
  
  <script>
    
    var createCORSRequest = function(method, url) {
      var xhr = new XMLHttpRequest();
      if ("withCredentials" in xhr) {
        // Most browsers.
        xhr.open(method, url, true);
      } else if (typeof XDomainRequest != "undefined") {
        // IE8 & IE9
        xhr = new XDomainRequest();
        xhr.open(method, url);
      } else {
        // CORS not supported.
        xhr = null;
      }
      return xhr;
    };

    var url = 'https://banking.bo.test.platform.integrated.finance/clients'
    var method = 'GET';
    var xhr = createCORSRequest(method, url);

    xhr.onload = function() {
      console.log("LOAD")
    };
    xhr.onerror = function() {
      console.log("ERROR")
    };
    //xhr.send();
    
    var url2 = 'https://www.mynet.com/'
    var method2 = 'GET';
    var xhr2 = createCORSRequest(method2, url2);
    
    xhr2.onload = function() {
      console.log("LOAD-2")
    };
    xhr2.onerror = function() {
      console.log("ERROR-2")
    };
    //xhr2.send();
    
    function test() {
      var url = document.getElementById("url").value
      var method = document.getElementById("method").value
      var request = document.getElementById("request").value
      
      var sendForm = new XMLHttpRequest();
      sendForm.open(method,url,true);
      sendForm.setRequestHeader("Content-Type", "application/json");
      sendForm.send(JSON.stringify(request))
    }
    
    
  </script> 

</body>

</html>
